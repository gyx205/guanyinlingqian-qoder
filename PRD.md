# 观音灵签网页应用 PRD（产品需求文档）

## 1. 产品概述

### 1.1 产品名称
观音灵签网页应用

### 1.2 产品定位
一个集传统文化与现代科技于一体的在线观音灵签抽取网站，用户可以通过网页端祈福问卦，获得传统签文解读和AI智能解析。

### 1.3 目标用户
- 对传统文化感兴趣的用户
- 寻求心灵慰藉和指引的用户
- 希望了解中华传统文化的年轻用户

### 1.4 核心价值
- 传承传统观音灵签文化
- 提供现代化的用户体验
- 结合AI技术提供个性化解签服务

## 2. 功能需求

### 2.1 核心功能流程

#### 2.1.1 用户操作流程
1. **进入页面**：用户访问网页，看到主界面
2. **输入问题**：用户在输入框中输入想要询问的问题
3. **点击抽签**：用户点击"抽签"按钮
4. **抽签动画**：播放2秒钟的抽签动画效果
5. **展示签文**：随机抽出一支签，显示签的正面（签文和典故）
6. **翻转查看**：用户点击签牌可翻转到反面查看解签内容
7. **AI解签**：用户点击"AI解签"按钮，获得AI个性化解析

#### 2.1.2 详细功能描述

**A. 问题输入模块**
- 输入框支持多行文本输入
- 字数限制：10-200字
- 输入框占位符：请输入您想要询问的问题...
- 输入验证：不能为空，不能包含特殊字符

**B. 抽签动画模块**
- 动画时长：2秒
- 动画效果：签筒摇动、签条飞出效果
- 动画风格：符合中式传统文化特色
- 动画结束后自动展示签文

**C. 签牌展示模块**
- **正面显示内容**：
  - 序号（如"五一签"）
  - 宫位（如"上签子宫"）
  - 签文（四句诗文）
  - 签名（典故名称，如"孔明入川"）
  
- **反面显示内容**：
  - **签语**：签文的整体释义
  - **解曰**：解签说明
  - **仙机详细解签**（包含以下15个方面）：
    - 家宅运势
    - 自身运势
    - 求财运势
    - 交易运势
    - 婚姻运势
    - 六甲（生育）
    - 行人（出行）
    - 田蚕（农业）
    - 六畜（畜牧）
    - 寻人（找人）
    - 公讼（诉讼）
    - 移徙（搬迁）
    - 失物（丢失物品）
    - 疾病（健康）
    - 山坟（祖先坟墓）
  - **典故**：历史故事背景

- **交互功能**：
  - 点击签牌可翻转
  - 翻转动画流畅自然
  - 支持重复翻转查看

**D. AI解签模块**
- AI模型：Deepseek
- 输入参数：用户问题 + 抽取的签文
- 输出内容：结合用户问题的个性化解签分析
- 字数：300-500字
- 响应时间：3-5秒

### 2.2 页面布局

#### 2.2.1 主界面布局
```
┌─────────────────────────────────────┐
│              页面标题                 │
│          "观音灵签求解"               │
├─────────────────────────────────────┤
│                                   │
│         问题输入区域                 │
│    ┌─────────────────────────┐     │
│    │   请输入您的问题...       │     │
│    │                         │     │
│    └─────────────────────────┘     │
│                                   │
│         ┌─────────┐               │
│         │  抽 签  │               │
│         └─────────┘               │
│                                   │
├─────────────────────────────────────┤
│                                   │
│           签牌展示区域               │
│         (抽签后显示)                │
│                                   │
├─────────────────────────────────────┤
│                                   │
│         ┌─────────┐               │
│         │ AI解签  │               │
│         └─────────┘               │
│                                   │
└─────────────────────────────────────┘
```

## 3. 技术需求

### 3.1 前端技术栈
- **框架**：Next.js 14.2（基于用户云端环境）
- **路由方案**：App Router（Next.js 最新路由系统）
- **样式**：Tailwind CSS
- **开发语言**：TypeScript
- **状态管理**：React Hooks / Zustand
- **部署方式**：静态导出（output: 'export'）+ 静态网站部署
- **API处理**：Next.js API Routes（处理AI解签等后端逻辑）

### 3.2 API集成

#### 3.2.1 灵签数据API
- **接口地址**：http://124.220.49.230/api/mingli/guanyin.php
- **开发者ID**：10007267
- **通讯KEY**：f412cd662f4613e7b3f651bc38094d91
- **接口文档**：https://www.apihz.cn/api/mingliguanyin.html
- **请求方式**：GET/POST
- **返回格式**：JSON

**请求参数示例**：
```json
{
  "id": "10007267",
  "key": "f412cd662f4613e7b3f651bc38094d91"
}
```

**返回数据结构**：
```json
{
  "code": 200,
  "msg": "success",
  "xuhao": "五一签",
  "gongwei": "上签子宫",
  "qianming": "孔明入川",
  "qianwen": "夏日炎天日最长，人人愁热闷非常；天地也解知人意，熏风拂拂自然凉。",
  "qianyu": "此卦人人愁热之象。凡事随心从意也。",
  "jieyue": "进退莫疑。自有佳期。营谋用度。不须妄为。",
  "xianji": "家宅→祈福,自身→谨防(凶中有吉),求财→秋吉,交易→平常,婚姻→合,六甲→生男,行人→动,田蚕→损,六畜→平,寻人→见,公讼→吉,移徙→旧,失物→北方,疾病→还愿,山坟→吉",
  "diangu": "孔明入川。刘备缺地盘。时益州的刘璋。被北方的张鲁攻打。想到刘备与他同姓同宗。就让刘备入益州同抗张鲁。孔明随刘备入益州。详察地势。西川一带。地形险要可攻可守。经孔明多方布置。西川就成了刘备发源地。",
  "img": "签文图片地址"
}
```

**字段说明**：
- `xuhao`: 序号（如"五一签"）
- `gongwei`: 宫位（如"上签子宫"）
- `qianming`: 签名（典故名称）
- `qianwen`: 签文（四句诗文）
- `qianyu`: 签语（签文释义）
- `jieyue`: 解曰（解签说明）
- `xianji`: 仙机（各方面详细解签，包含：家宅、自身、求财、交易、婚姻、六甲、行人、田蚕、六畜、寻人、公讼、移徙、失物、疾病、山坟等）
- `diangu`: 典故（历史故事）
- `img`: 签文图片地址

#### 3.2.2 AI解签API (Deepseek)
- **API Key**：sk-e965f6232d684a2d90192a957d32f6bb
- **API文档**：https://api-docs.deepseek.com/zh-cn/
- **错误码文档**：https://api-docs.deepseek.com/zh-cn/quick_start/error_codes
- **接口地址**：https://api.deepseek.com/v1/chat/completions

**请求示例**：
```json
{
  "model": "deepseek-chat",
  "messages": [
    {
      "role": "system",
      "content": "你是一位精通观音灵签解读的大师，请根据用户的问题和抽到的签文，给出详细的解读分析。"
    },
    {
      "role": "user",
      "content": "用户问题：{用户输入的问题}\n签文：{抽到的签文内容}\n请结合问题和签文给出详细解读。"
    }
  ],
  "max_tokens": 800,
  "temperature": 0.7
}
```

## 4. UI/UX设计规范

### 4.1 设计风格
- **整体风格**：中式现代化设计
- **设计原则**：简洁、优雅、具有文化内涵

### 4.2 视觉规范

#### 4.2.1 颜色方案
- **主色调**：淡橙黄色 (#FFF4E6, #FFE4B5, #FFD700)
- **辅助色**：
  - 深橙色：#CD853F（用于重要按钮）
  - 浅灰色：#F5F5F5（用于背景）
  - 深灰色：#333333（用于文字）
  - 红色：#DC143C（用于强调）

#### 4.2.2 排版规范
- **主标题**：28px, 思源黑体/华文行楷
- **副标题**：20px, 思源黑体
- **正文**：16px, 苹方/微软雅黑
- **按钮文字**：18px, 思源黑体

#### 4.2.3 组件规范
- **圆角半径**：8px（小组件）、12px（大组件）
- **按钮规范**：
  - 高度：48px
  - 圆角：24px
  - 阴影：0 4px 12px rgba(255, 212, 0, 0.3)
- **输入框规范**：
  - 边框：1px solid #FFD700
  - 圆角：8px
  - 内边距：12px 16px
  - 背景：半透明白色 rgba(255, 255, 255, 0.8)

#### 4.2.4 半透视效果
- **卡片背景**：rgba(255, 244, 230, 0.9)
- **毛玻璃效果**：backdrop-filter: blur(10px)
- **阴影效果**：box-shadow: 0 8px 32px rgba(255, 212, 0, 0.2)

### 4.3 动画规范
- **过渡时间**：0.3s（普通交互）、0.6s（翻转动画）
- **缓动函数**：ease-in-out
- **抽签动画**：2秒，包含摇动、飞出、旋转效果

## 5. 性能要求

### 5.1 加载性能
- 首屏加载时间：< 2秒
- API响应时间：< 3秒
- 动画流畅度：60fps

### 5.2 兼容性要求
- 支持主流浏览器：Chrome 80+、Firefox 75+、Safari 13+、Edge 80+
- 移动端适配：iOS Safari、Android Chrome
- 响应式设计：支持各种屏幕尺寸（手机、平板、桌面）
- PWA支持：支持添加到主屏，离线缓存基本功能

## 6. 用户体验

### 6.1 交互细节
- 按钮点击有反馈效果（按下状态）
- 加载状态有明确的loading提示
- 错误状态有友好的错误提示
- 成功状态有愉悦的反馈

### 6.2 文案规范
- 按钮文案：抽签、AI解签、重新抽签
- 提示文案：请输入您想要询问的问题、正在为您抽签...、AI正在解读中...
- 错误文案：网络连接失败，请重试、请输入有效的问题

### 6.3 无障碍设计
- 支持键盘导航
- 合理的颜色对比度
- 语义化的HTML结构

## 7. 开发计划

### 7.1 开发阶段
1. **第一阶段**（3天）：基础页面搭建和UI实现
2. **第二阶段**（2天）：灵签API集成和数据展示
3. **第三阶段**（2天）：抽签动画和翻转效果实现
4. **第四阶段**（2天）：AI解签功能集成
5. **第五阶段**（1天）：测试和优化

### 7.2 技术风险
- API服务稳定性
- AI接口调用限制
- 动画性能优化
- 移动端兼容性

## 8. 测试计划

### 8.1 功能测试
- 抽签流程完整性测试
- API接口稳定性测试
- AI解签准确性测试
- 异常情况处理测试

### 8.2 性能测试
- 页面加载速度测试
- 动画流畅度测试
- 内存使用情况测试

### 8.3 兼容性测试
- 多浏览器兼容性测试
- 多设备适配测试
- 网络环境测试

## 9. 部署和运维

### 9.1 部署方案
- **静态网站部署**：支持 Netlify、Vercel、GitHub Pages 等平台
- **云服务器部署**：支持 Nginx + 静态文件部署
- **CDN加速**：配置 CDN 提升全球访问速度
- **HTTPS支持**：必须支持 HTTPS，确保 API调用安全

### 9.2 数据监控
- 用户访问量统计（Google Analytics / 百度统计）
- 抽签成功率监控
- API调用成功率监控
- 页面性能监控（Core Web Vitals）

### 9.3 迭代优化
- 根据用户反馈优化UI体验
- 增加更多签文数据
- 优化AI解签质量
- 增加新功能（如收藏、分享、历史记录等）

---

**文档版本**：v1.0  
**创建日期**：2025-08-25  
**更新日期**：2025-08-25  
**负责人**：产品团队